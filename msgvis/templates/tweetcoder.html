{% extends '_layouts/base.html' %}
{% load staticfiles djangular_tags %}

{% block page_title %}TweetCoder{% endblock %}

{% block meta %}
<meta name="twitter:widgets:csp" content="on">
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'theme.less' %}" type="text/less">
<link rel="stylesheet" href="{% static 'style.less' %}" type="text/less">
<link rel="stylesheet" href="{% static 'bower/c3/c3.css' %}">
<link rel="stylesheet" href="{% static 'tweet_coder.less' %}" type="text/less">

{% endblock %}

{% block js %}
{{ block.super }}

<script src="{% static 'bower/angular/angular.js' %}"></script>
<script src="{% static 'bower/angular-cookies/angular-cookies.js' %}"></script>
<script src="{% static 'bower/angular-route/angular-route.js' %}"></script>
<script src="{% static 'bower/angular-resource/angular-resource.js' %}"></script>
<script src="{% static 'bower/angular-animate/angular-animate.js' %}"></script>
<script src="{% static 'bower/angular-sanitize/angular-sanitize.js' %}"></script>
<script src="{% static 'bower/angucomplete-alt/angucomplete-alt.js' %}"></script>
<script src="{% static 'bower/angular-smart-table/dist/smart-table.js' %}"></script>

<script src="{% static 'bower/jquery-ui/ui/core.js' %}"></script>
<script src="{% static 'bower/jquery-ui/ui/widget.js' %}"></script>
<script src="{% static 'bower/jquery-ui/ui/mouse.js' %}"></script>
<script src="{% static 'bower/jquery-ui/ui/draggable.js' %}"></script>
<script src="{% static 'bower/jquery-ui/ui/droppable.js' %}"></script>
<script src="{% static 'bower/angular-dragdrop/src/angular-dragdrop.js' %}"></script>

<script src="{% static 'djangular/js/django-angular.js' %}"></script>

<script src="{% static 'bower/spin.js/spin.js' %}"></script>
<script src="{% static 'bower/angular-spinner/angular-spinner.js' %}"></script>
    
<script src="{% static 'bower/moment/moment.js' %}"></script>
<script src="{% static 'bower/d3/d3.js' %}"></script>
<script src="{% static 'bower/c3/c3.js' %}"></script>

<script src="{% static 'tweet_coder/app.js' %}"></script>
<script src="{% static 'tweet_coder/services.js' %}"></script>
<script src="{% static 'tweet_coder/controllers.js' %}"></script>


{% endblock %}

{% block navigation_bar %}
{% endblock %}

{% block bootstrapping %}
{{ block.super }}
<script>
    angular.module('ng.django.urls')
        .constant('patterns', {% load_djng_urls %});

    angular.module('TweetCoder.bootstrap')
        .constant('TweetCoder.bootstrap.dictionary', {{ object.pk }});
</script>

{% endblock %}

{% block content %}

<div ng-app="TweetCoder" id="application" class="container-fluid"  ng-controller="TweetCoder.controllers.DictionaryController">
        <div id="titleWrap" class="row clearfix"  ng-cloak="">

             <div class="logo-titles">
                 <span class="title">Tweet Coder</span>
                 <span class="description">Basic tweet labeling interface</span>
                 <span class="dataset">{$ Dictionary.dataset.description $} ({$ Dictionary.dataset.message_count $} messages)</span>
             </div>

        </div>
        <div id="content" class="ng-cloak" ng-cloak  ng-controller="TweetCoder.controllers.ViewController" >
            <div class="wrap">
                <div class="box">
                    <div class="box-header">new label</div>
                    <div class="tweet-main">@HopeForBoston: R.I.P. to the 8 year-old girl who died in Bostons explosions, while running for the Sandy @PeytonsHead RT for spam please</div>
                    <div class="btn-group-code" data-toggle="buttons">
                        <label class="btn btn-default" ng-repeat="code in svm_results.codes">
                            <input type="radio" ng-attr-id="{$ 'code-' + code.index $}"
                                   ng-attr-name="{$ code.text $}" ng-attr-value="{$ code.index $}" /> {$ code.text $}
                        </label>
                    </div>
                    <div class="form-inline">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox"> ambiguous
                            </label>
                        </div>
                        <button type="submit" class="btn btn-default">Submit Code</button>
                    </div>
                </div>
                <div class="box">
                    <span us-spinner="spinnerOptions" spinner-key="table-spinner"></span>
                    <table st-table="features" st-safe-src="svm_results.features" class="table table-striped">
                        <thead>
                            <tr>
                                <td class='dist-title' colspan="3">Training code distribution</td>
                                <td class="bar-td" ng-repeat="code in svm_results.codes">
                                    <div>{$ code.train_count $}</div>
                                    <div ng-style=dist(code) class="bar"></div>
                                </td>
                                <td></td>
                                <td ng-if="vector"></td>
                                <td ng-if="vector"></td>
                            </tr>
                            <tr>
                                <th st-sort="word_index">word_index</th>
                                <th st-sort="word">word</th>
                                <th st-sort="count">count</th>
                                <th st-sort="codes.{$ code.text $}.order" ng-repeat="code in svm_results.codes">
                                    {$ code.text $}
                                </th>
                                <th st-sort="in_top_features" st-sort-default="reverse"># in top</th>
                                <td ng-show="vector"></td>
                                <th st-sort="getter.vector" ng-if="vector" st-sort-default="reverse"> {$ 'Tweet ' + vector.message.id $}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="feature in features">
                                <th>{$ feature.word_index $}</th>
                                <th>{$ feature.word $}</th>
                                <th>{$ feature.count $}</th>
                                <td ng-style="style(feature.codes[code.text],code.index)" ng-repeat="code in svm_results.codes">
                                    {$ feature.codes[code.text].weight | number: 2 $}
                                </td>
                                <td>{$ feature.in_top_features $}</td>
                                <td></td>
                                <td ng-if="vector" ng-style="on_off(vector.feature_vector[feature.word_index])">
                                    {$ vector.feature_vector[feature.word_index] $}
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
</div>

{% endblock %}
{% block footer %}
{% endblock %}
